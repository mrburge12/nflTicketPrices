#These two lines of code remove columns from a data frame by name
#the purpose of un-nesting the data is to avoid duplication and to make
#dat easier to export
dropVenueDataCols<- c("location", "access_method", "links")
venue<-eventData$venue[,!names(eventData$venue) %in% dropVenueDataCols]
for (col in dupCols) {
colnames(venue)[colnames(venue)== col] <- paste(col,"_venue", sep = "")
}
#At this point, we exclude taxonomies, performers, and links (they don't provide any necessary info for pricing)
#they are also going to be costly to clean up due to their nested nature.
#this is something I can revisit later if necessary
#We remove columns from eventData if they are listed in another dataframe
dropEventDataCols <- c("stats", "venue", "access_method", "taxonomies","announcements", "performers", "links", "dq_bucket_counts")
eventData<- eventData[ , !(names(eventData) %in% dropEventDataCols)]
#fix timestamp variable
timestamp<-gsub(" ", "_", timestamp)
timestamp<-gsub(":",".", timestamp)
date<-substr(x = timestamp,1,10)
#Combine dataframes to export
finalEventData<-as.data.table(cbind(date,timestamp, eventData, stats, access_method, venue, eventLocationLongLat, venueAccess_method))
#finalEventData %>%
# select(noquote(order(colnames(finalEventData)))) #Sort data frame by alphabetical columns
#Merge dataframes
finalData<-rbind(finalEventData, finalData, fill = TRUE)
finalData %>%
select(noquote(order(colnames(finalEventData)))) #Sort data frame by alphabetical columns
#pricesOutputFileName<- paste("C:/Users/mrbur/Desktop/nflTicketPrices/data/seatgeek/cleanData/priceData/sg_",timestamp,".json",sep="")
#write_json(prices, path = pricesOutputFileName)
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalDataWithTest",".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
file.names
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-load(file.names[1])
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
file.names
file.names[1]
finalData<-read.csv(file.names[1])
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data %>%
select(noquote(order(colnames(finalEventData))))
#finalData<-rbind(finalEventData, finalData, fill = TRUE)
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data %>%
select(noquote(order(colnames(data))))
#finalData<-rbind(finalEventData, finalData, fill = TRUE)
}
type(data)
?data
data %>%
select(noquote(order(colnames(data))))
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
#finalData<-rbind(finalEventData, data, fill = TRUE)
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(finalEventData, data, fill = TRUE) %>%
select(noquote(order(colnames(finalData))))
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData, fill = TRUE) %>%
select(noquote(order(colnames(finalData))))
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-merge(data, finalData) %>%
select(noquote(order(colnames(finalData))))
}
?merge
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-merge(data, finalData, by = timestamp) %>%
select(noquote(order(colnames(finalData))))
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-merge(data, finalData, by = "timestamp") %>%
select(noquote(order(colnames(finalData))))
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-merge(data, finalData, by = "timestamp")
#  select(noquote(order(colnames(finalData))))
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-merge(data, finalData)
#  select(noquote(order(colnames(finalData))))
}
?append
View(finalData)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData)
#  select(noquote(order(colnames(finalData))))
}
?rbind
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data<- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData, fill = TRUE)
#  select(noquote(order(colnames(finalData))))
}
finalData<-as.data.table(finalData)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
finalData<-as.data.table(finalData)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
data <- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData, fill = TRUE)
#  select(noquote(order(colnames(finalData))))
}
finalData$timestamp
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
data <- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData, fill = TRUE)
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalDataWithTest",".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
out.file<-""
file.names <- dir(path, pattern =".csv")
finalData<-read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
data <- data %>%
select(noquote(order(colnames(data))))
finalData<-rbind(data, finalData, fill = TRUE) %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalDataWithTest",".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalDataWithTest",".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalDataWithTest",".csv",sep="")
write.csv(finalData, file = outputFileName)
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",sys.Date(),".csv",sep="")
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
outputFileName
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/rawDataWorkspaces/seatgeek/')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/rawDataWorkspaces/seatgeek/'
out.file<-""
file.names <- dir(path, pattern =".RData")
file.names
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/rawDataWorkspaces/seatgeek/')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/rawDataWorkspaces/seatgeek/'
out.file<-""
file.names <- dir(path, pattern =".RData")
#initialize data tables
finalData<- data.table()
finalPriceData<-data.table()
#Loop through workspaces
for(i in 1:length(file.names)){
data <- load(file.names[i])
#Set up all of the individual data frames
#Start with main event data
eventData<-response$events
#Pull out nested data frames
dropStatsCols<- c("dq_bucket_counts")
dupCols<- c("created_at", "employee_only", "id", "score", "url", "method", "popularity")
stats<-eventData$stats[,!names(eventData$stats) %in% dropStatsCols]
for (col in dupCols) {
colnames(stats)[colnames(stats)== col] <- paste(col,"_stats", sep = "")
}
access_method<-eventData$access_method
for (col in dupCols) {
colnames(access_method)[colnames(access_method)== col] <- paste(col,"_accessMethod", sep = "")
}
#There's two nested data frames in the venue data frame, which is itself nested in eventData
#These two data frames are separated from the rest of the venue data frame
eventLocationLongLat<-eventData$venue$location
venueAccess_method<-eventData$venue$access_method
for (col in dupCols) {
colnames(venueAccess_method)[colnames(venueAccess_method)== col] <- paste(col,"_AccessMethod", sep = "")
}
#These two lines of code remove columns from a data frame by name
#the purpose of un-nesting the data is to avoid duplication and to make
#dat easier to export
dropVenueDataCols<- c("location", "access_method", "links")
venue<-eventData$venue[,!names(eventData$venue) %in% dropVenueDataCols]
for (col in dupCols) {
colnames(venue)[colnames(venue)== col] <- paste(col,"_venue", sep = "")
}
#At this point, we exclude taxonomies, performers, and links (they don't provide any necessary info for pricing)
#they are also going to be costly to clean up due to their nested nature.
#this is something I can revisit later if necessary
#We remove columns from eventData if they are listed in another dataframe
dropEventDataCols <- c("stats", "venue", "access_method", "taxonomies","announcements", "performers", "links", "dq_bucket_counts")
eventData<- eventData[ , !(names(eventData) %in% dropEventDataCols)]
#fix timestamp variable
timestamp<-gsub(" ", "_", timestamp)
timestamp<-gsub(":",".", timestamp)
date<-substr(x = timestamp,1,10)
#Combine dataframes to export
finalEventData<-as.data.table(cbind(date,timestamp, eventData, stats, access_method, venue, eventLocationLongLat, venueAccess_method))
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual/sg_", timestamp, ".csv",sep="")
write.csv(finalEventData, file = outputFileName)
}
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
write.csv(finalData, file = outputFileName)
test <- finalData[!duplicated(finalData), ]
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData)))) %>%
finalData[!duplicated(finalData),]
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
write.csv(finalData, file = outputFileName)
library(jsonlite)
library(data.table)
library(dplyr)
setwd('C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual')
path = 'C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/individual'
#out.file <- ""
file.names <- dir(path, pattern =".csv")
#Initialize data to merge with by pulling in the first available data frame
finalData <- read.csv(file.names[1])
finalData<-as.data.table(finalData)
for(i in 2:length(file.names)){
data <- read.csv(file.names[i])
data <- as.data.table(data)
finalData<- rbind(data, finalData, fill = TRUE)
finalData<- finalData %>%
select(noquote(order(colnames(finalData))))
finalData<- finalData[!duplicated(finalData),]
}
outputFileName <- paste("C:/Users/g1mxb12/Desktop/nflTicketPrices/data/seatgeek/cleanData/eventData/finalData",Sys.Date(),".csv",sep="")
write.csv(finalData, file = outputFileName)
